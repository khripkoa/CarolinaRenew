---
import { Image } from "astro:assets";

// Real project images
const beforeImage = "/images/portfolio/kitchen1-before-1.webp";
const afterImage = "/images/portfolio/kitchen1-after-1.jpg";
---

<section class="py-20 bg-gray-900 text-white overflow-hidden">
    <div class="w-full px-4 sm:px-8 lg:px-12 xl:px-16">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
            <div>
                <h2 class="section-title-sm">See the Difference</h2>
                <p class="text-lg text-gray-300 mb-8">
                    From dark and dated to bright and modern. Our factory-finish
                    process transforms your kitchen without the mess of a
                    renovation.
                </p>

                <div class="space-y-6">
                    <div class="flex items-center gap-4">
                        <div
                            class="w-12 h-12 rounded-full bg-orange-500 flex items-center justify-center text-white font-bold text-xl"
                        >
                            1
                        </div>
                        <div>
                            <h3 class="font-bold text-xl">
                                Factory-Grade Finish
                            </h3>
                            <p class="text-gray-400 text-sm">
                                We achieve a durable and uniform coating using
                                professional equipment and materials.
                            </p>
                        </div>
                    </div>
                    <div class="flex items-center gap-4">
                        <div
                            class="w-12 h-12 rounded-full bg-orange-500 flex items-center justify-center text-white font-bold text-xl"
                        >
                            2
                        </div>
                        <div>
                            <h3 class="font-bold text-xl">On-Time Guarantee</h3>
                            <p class="text-gray-400 text-sm">
                                We guarantee completion exactly on schedule, as
                                promised (3–5 days).
                            </p>
                        </div>
                    </div>
                    <div class="flex items-center gap-4">
                        <div
                            class="w-12 h-12 rounded-full bg-orange-500 flex items-center justify-center text-white font-bold text-xl"
                        >
                            3
                        </div>
                        <div>
                            <h3 class="font-bold text-xl">
                                Cleanliness & Safety
                            </h3>
                            <p class="text-gray-400 text-sm">
                                We fully protect your living space from dust and
                                odors during the work.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="mt-10">
                    <a
                        href="tel:+19804088122"
                        class="inline-flex items-center px-8 py-4 border border-transparent text-base font-bold rounded-xl shadow-lg text-gray-900 bg-white hover:bg-gray-100 transition"
                    >
                        Call Now: (980) 408-8122
                    </a>
                </div>
            </div>

            <!-- Interactive Before/After Slider -->
            <div class="relative group">
                <div
                    class="relative rounded-2xl overflow-hidden shadow-2xl border-4 border-white/10"
                    x-data="{ sliderPosition: 50 }"
                >
                    <div class="relative h-[400px] md:h-[500px]">
                        <!-- After Image (Full Width) -->
                        <Image
                            src={afterImage}
                            alt="After Kitchen"
                            class="absolute inset-0 w-full h-full object-cover"
                            width={800}
                            height={600}
                            format="avif"
                            quality={60}
                            loading="lazy"
                            decoding="async"
                        />

                        <!-- Before Image (Clipped) -->
                        <div
                            class="absolute inset-0 overflow-hidden"
                            x-bind:style="`clip-path: inset(0 ${100 - sliderPosition}% 0 0);`"
                        >
                            <Image
                                src={beforeImage}
                                alt="Before Kitchen"
                                class="absolute inset-0 w-full h-full object-cover"
                                width={800}
                                height={600}
                                format="avif"
                                quality={60}
                                loading="lazy"
                                decoding="async"
                            />
                        </div>

                        <!-- Labels -->
                        <div
                            class="absolute top-4 left-4 bg-black/70 text-white px-3 py-1 rounded text-sm font-bold"
                        >
                            BEFORE
                        </div>
                        <div
                            class="absolute top-4 right-4 bg-green-600 text-white px-3 py-1 rounded text-sm font-bold"
                        >
                            AFTER
                        </div>

                        <!-- Slider Control -->
                        <div
                            class="absolute inset-y-0 w-1 bg-white shadow-lg cursor-ew-resize group"
                            x-bind:style="`left: ${sliderPosition}%;`"
                            x-on:mousedown="(e) => {
                                const container = e.currentTarget.parentElement;
                                const rect = container.getBoundingClientRect();
                                const moveHandler = (moveEvent) => {
                                    const x = moveEvent.clientX - rect.left;
                                    sliderPosition = Math.max(0, Math.min(100, (x / rect.width) * 100));
                                };
                                const upHandler = () => {
                                    document.removeEventListener('mousemove', moveHandler);
                                    document.removeEventListener('mouseup', upHandler);
                                };
                                document.addEventListener('mousemove', moveHandler);
                                document.addEventListener('mouseup', upHandler);
                            }"
                            x-on:touchstart="(e) => {
                                const container = e.currentTarget.parentElement;
                                const rect = container.getBoundingClientRect();
                                const moveHandler = (moveEvent) => {
                                    const touch = moveEvent.touches[0];
                                    const x = touch.clientX - rect.left;
                                    sliderPosition = Math.max(0, Math.min(100, (x / rect.width) * 100));
                                };
                                const upHandler = () => {
                                    document.removeEventListener('touchmove', moveHandler);
                                    document.removeEventListener('touchend', upHandler);
                                };
                                document.addEventListener('touchmove', moveHandler);
                                document.addEventListener('touchend', upHandler);
                            }"
                        >
                            <div
                                class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-12 h-12 bg-white rounded-full flex items-center justify-center shadow-xl"
                            >
                                <svg
                                    class="w-6 h-6 text-gray-600"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                    ><path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"
                                    ></path></svg
                                >
                            </div>
                        </div>
                    </div>
                </div>
                <p class="text-center text-sm text-gray-400 mt-4 italic">
                    Actual client project in Charlotte, NC
                </p>
                <p class="text-center text-xs text-blue-400 mt-2">
                    ← Drag the slider to compare →
                </p>
            </div>
        </div>
    </div>
</section>
