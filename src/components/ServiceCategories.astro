---
// ServiceCategories - Displays all service categories with links
import services from "../data/services.json";

interface Props {
    citySlug?: string;
    city?: string;
}

const { citySlug = "", city = "Charlotte" } = Astro.props;

// Build base path for links - always lowercase
const basePath = citySlug ? `/${citySlug.toLowerCase()}` : "";
---

<section class="py-16 bg-white">
    <div class="w-full px-4 sm:px-8 lg:px-12 xl:px-16">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-gray-900">
                Our Services in {city}
            </h2>
            <p class="text-gray-600 mt-3 max-w-2xl mx-auto">
                Professional painting and refinishing services for every need.
                Click any category to learn more.
            </p>
        </div>

        <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6"
        >
            {
                services.map((category) => (
                    <div class="bg-gray-50 rounded-xl p-6 hover:shadow-lg transition-shadow">
                        <a href={`${basePath}/${category.slug}/`} class="block">
                            <h3 class="text-lg font-bold text-gray-900 mb-4 hover:text-orange-600 transition-colors">
                                {category.category}
                            </h3>
                        </a>
                        <ul class="space-y-2">
                            {category.services.map((service) => (
                                <li>
                                    <a
                                        href={`${basePath}/${category.slug}/${service.slug}/`}
                                        class="text-sm text-gray-600 hover:text-orange-600 transition-colors flex items-center gap-2"
                                    >
                                        <svg
                                            class="w-3 h-3 text-orange-500"
                                            fill="currentColor"
                                            viewBox="0 0 20 20"
                                        >
                                            <path
                                                fill-rule="evenodd"
                                                d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                                                clip-rule="evenodd"
                                            />
                                        </svg>
                                        {service.name}
                                    </a>
                                </li>
                            ))}
                        </ul>
                    </div>
                ))
            }
        </div>

        <div class="text-center mt-10">
            <a
                href="/contact/"
                class="inline-block px-8 py-4 bg-orange-600 text-white font-bold rounded-lg hover:bg-orange-700 transition shadow-lg hover:shadow-xl"
            >
                Get a Free Quote â†’
            </a>
        </div>
    </div>
</section>
